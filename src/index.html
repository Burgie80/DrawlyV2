<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Visual Programming Editor</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="./js/skulpt.min.js" type="text/javascript"></script> 
    <script src="./js/skulpt-stdlib.js" type="text/javascript"></script> 
    <script>
        console.log("Skulpt loaded:", typeof Sk !== 'undefined');
    </script>
</head>

<body>
    <div class="min-h-screen flex flex-col">
        <!-- Navigation Bar -->
        <nav class="bg-white shadow px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <span class="text-xl font-semibold">〈/〉 Visual</span>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="flex-1 flex">
            <!-- Center - Workspace -->
            <div class="flex-1 flex flex-col">
                <div class="p-4 bg-gray-100 border-b">
                    <span class="text-gray-600">Drag your blocks here</span>
                </div>
                <div id="blocklyDiv" class="flex-1"></div>
            </div>

            <!-- Right Sidebar - Preview -->
            <div class="w-80 bg-white border-l">
                <div class="p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold">Animation Preview</h2>
                        <button id="runButton" class="bg-green-500 text-white px-4 py-2 rounded-md flex items-center">
                            <span class="mr-2">▶</span>
                        </button>
                    </div>
                    <div class="flex flex-col space-y-4">
                        <div id="turtleCanvas" class="border rounded-lg h-40 w-40 bg-white"></div>
                    </div>
                </div>
                <div class="px-4">
                    <button id="generateCodeBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md transition-colors">
                        Generate Python Code
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="pythonModal" class="modal">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Python Code</h2>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
                
                <p class="text-sm text-gray-600 mb-4">
                    Paste this code inside a Python file, and then execute it according to the filename you 
                    gave to it, or you can choose to save it from here! Remember that you should have the 
                    'turtle' package installed.
                </p>

                <div class="bg-gray-50 rounded-lg p-4 font-mono text-sm">
                    <pre id="codeDisplay" class="whitespace-pre-wrap break-words"></pre>
                </div>

                <div class="mt-6 flex justify-end">
                    <button id="saveCodeBtn" class="bg-blue-100 text-blue-600 px-6 py-2 rounded-md hover:bg-blue-200 transition-colors">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    console.log("Skulpt loaded:", typeof Sk !== 'undefined');
</script>
</html>